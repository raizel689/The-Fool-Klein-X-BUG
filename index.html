<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ùëáùêªùê∏ ùêπùëÇùëÇùêø ùêæùêøùê∏ùêºùëÅ ùëã-ùêµùëàùê∫ ùê¥ùëÉùëÉùëÜ</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    :root {
      --bg: #121417;
      --panel: rgba(255, 255, 255, 0.05);
      --border: rgba(212, 163, 115, 0.3);
      --accent: #d4a373;
      --text: #e5e7eb;
      --text-muted: #9ca3af;
      --glow: rgba(255, 214, 110, 0.3);
      --transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      --lamp-shade: #f5f0e6;
      --lamp-base: #d1ccc2;
    }

    [data-theme="light"] {
      --bg: #f5f0e6;
      --panel: #ffffff;
      --border: #d4a373;
      --accent: #b38728;
      --text: #121417;
      --text-muted: #666666;
      --glow: rgba(212, 163, 115, 0.2);
      --lamp-shade: #e8e2d9;
      --lamp-base: #d1ccc2;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Montserrat', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      padding-bottom: 120px;
      transition: var(--transition);
      position: relative;
    }

    body::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 50% 30%, var(--glow), transparent 70%);
      pointer-events: none;
      z-index: 0;
    }

    .app-wrapper {
      width: 100%;
      max-width: 420px;
      z-index: 10;
      position: relative;
    }

    .header-image {
      text-align: center;
      margin-bottom: 20px;
    }

    .header-image img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 3px solid var(--accent);
      box-shadow: 0 0 30px var(--glow);
      object-fit: cover;
    }

    h1.main-title {
      font-family: 'Orbitron', sans-serif;
      color: var(--accent);
      font-size: 24px;
      margin-bottom: 20px;
      text-align: center;
      text-shadow: 0 0 30px var(--accent);
      letter-spacing: 3px;
      word-break: break-word;
    }

    .container {
      background: var(--panel);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      padding: 25px;
      border-radius: 30px;
      width: 100%;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      margin-bottom: 20px;
    }

    .section-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 14px;
      color: var(--accent);
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    input, textarea {
      width: 100%;
      padding: 15px;
      border-radius: 15px;
      background: rgba(255, 255, 255, 0.07);
      border: 1px solid transparent;
      color: var(--text);
      margin-bottom: 20px;
      font-size: 15px;
      outline: none;
      transition: var(--transition);
    }

    textarea {
      min-height: 100px;
      resize: vertical;
      font-family: 'Montserrat', sans-serif;
    }

    [data-theme="light"] input, [data-theme="light"] textarea {
      background: #f5f5f5;
      border: 1px solid var(--border);
      color: #121417;
    }

    input:focus, textarea:focus {
      border-color: var(--accent);
      background: rgba(255, 255, 255, 0.12);
      box-shadow: 0 0 20px var(--glow);
    }

    /* ===== CUSTOM DROPDOWN STYLES ===== */
    .custom-dropdown {
      position: relative;
      width: 100%;
      margin-bottom: 20px;
    }

    .dropdown-selected {
      width: 100%;
      padding: 15px;
      border-radius: 15px;
      background: rgba(255, 255, 255, 0.07);
      border: 1px solid transparent;
      color: var(--text);
      font-size: 15px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: var(--transition);
    }

    [data-theme="light"] .dropdown-selected {
      background: #f5f5f5;
      border: 1px solid var(--border);
      color: #121417;
    }

    .dropdown-selected:hover,
    .dropdown-selected:focus {
      border-color: var(--accent);
      background: rgba(255, 255, 255, 0.12);
      box-shadow: 0 0 20px var(--glow);
    }

    .dropdown-arrow {
      transition: transform 0.3s ease;
      color: var(--accent);
    }

    .dropdown-arrow.open {
      transform: rotate(180deg);
    }

    .dropdown-options {
      position: absolute;
      top: calc(100% + 5px);
      left: 0;
      width: 100%;
      background: var(--panel);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .dropdown-options.open {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-option {
      padding: 15px;
      cursor: pointer;
      transition: var(--transition);
      color: var(--text);
      border-bottom: 1px solid rgba(212, 163, 115, 0.1);
    }

    .dropdown-option:last-child {
      border-bottom: none;
    }

    .dropdown-option:hover {
      background: linear-gradient(135deg, #bf953f, #b38728);
      color: #121417;
      padding-left: 20px;
    }

    .dropdown-option.selected {
      background: rgba(212, 163, 115, 0.2);
      color: var(--accent);
      font-weight: 600;
    }

    [data-theme="light"] .dropdown-option.selected {
      background: rgba(180, 135, 40, 0.2);
      color: #b38728;
    }

    .dropdown-option i {
      margin-right: 10px;
      width: 20px;
      color: var(--accent);
    }

    .dropdown-option:hover i {
      color: #121417;
    }

    .execute-button {
      background: linear-gradient(135deg, #bf953f, #fcf6ba, #b38728, #fcf6ba, #aa771c);
      color: #121417;
      padding: 18px;
      width: 100%;
      border-radius: 15px;
      font-weight: 700;
      border: none;
      cursor: pointer;
      font-size: 16px;
      letter-spacing: 1px;
      transition: var(--transition);
      box-shadow: 0 5px 20px var(--glow);
      text-transform: uppercase;
    }

    .execute-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px var(--accent);
    }

    .execute-button:active {
      transform: scale(0.98);
    }

    .execute-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* ==================== */
    /* SECTION PREMIUM */
    /* ==================== */
    .premium-section {
      margin-top: 20px;
      padding: 20px;
      background: linear-gradient(135deg, rgba(212, 163, 115, 0.15), rgba(179, 135, 40, 0.05));
      border: 2px solid var(--accent);
      border-radius: 20px;
      text-align: center;
    }

    .premium-section h3 {
      font-family: 'Orbitron', sans-serif;
      color: var(--accent);
      margin-bottom: 15px;
      font-size: 18px;
    }

    .premium-badge {
      display: inline-block;
      padding: 8px 16px;
      background: linear-gradient(135deg, #bf953f, #b38728);
      color: #121417;
      border-radius: 50px;
      font-weight: 700;
      font-size: 14px;
      margin-bottom: 20px;
      box-shadow: 0 0 20px var(--glow);
    }

    .pricing-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }

    .pricing-card {
      background: var(--panel);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 20px 15px;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .pricing-card:hover {
      transform: translateY(-5px);
      border-color: var(--accent);
      box-shadow: 0 10px 30px var(--glow);
    }

    .pricing-card.selected {
      border: 2px solid var(--accent);
      background: rgba(212, 163, 115, 0.1);
    }

    .pricing-card.selected::before {
      content: '‚úì';
      position: absolute;
      top: 10px;
      right: 10px;
      width: 20px;
      height: 20px;
      background: var(--accent);
      color: #121417;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }

    .popular-badge {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: white;
      padding: 4px 12px;
      border-radius: 50px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      white-space: nowrap;
    }

    .pricing-name {
      font-family: 'Orbitron', sans-serif;
      font-size: 16px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 10px;
    }

    .pricing-price {
      font-size: 28px;
      font-weight: 800;
      color: var(--text);
      margin-bottom: 5px;
    }

    .pricing-price small {
      font-size: 14px;
      color: var(--text-muted);
      font-weight: 400;
    }

    .pricing-features {
      list-style: none;
      font-size: 12px;
      color: var(--text-muted);
      margin: 15px 0;
    }

    .pricing-features li {
      margin: 8px 0;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .pricing-features i {
      color: var(--accent);
      font-size: 10px;
    }

    .current-plan {
      margin-top: 20px;
      padding: 15px;
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid #22c55e;
      border-radius: 15px;
      color: #22c55e;
      display: none;
    }

    .current-plan.show {
      display: block;
    }

    .plan-expiry {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 5px;
    }

    /* ==================== */
    /* NAVIGATION AVEC MARQUEUR */
    /* ==================== */
    #nav {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      background: var(--panel);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      border-radius: 50px;
      padding: 8px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
      z-index: 1000;
    }

    #nav a {
      position: relative;
      padding: 12px 25px;
      color: var(--text-muted);
      text-decoration: none;
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: var(--transition);
      z-index: 2;
    }

    #nav a:hover, #nav a.active {
      color: #fff;
    }

    .marker {
      position: absolute;
      bottom: 8px;
      left: 0;
      height: calc(100% - 16px);
      background: linear-gradient(135deg, #bf953f, #b38728);
      border-radius: 50px;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: 0 5px 20px var(--accent);
      z-index: 1;
    }

    /* ==================== */
    /* DROPDOWN PROFIL */
    /* ==================== */
    .profile-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }

    .profile-dropdown-btn {
      width: 200px;
      padding: 12px 18px;
      background: var(--panel);
      backdrop-filter: blur(10px);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-radius: 15px;
      cursor: pointer;
      border: 1px solid var(--border);
      font-size: 14px;
      font-weight: 600;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      transition: var(--transition);
    }

    .profile-dropdown-btn:hover {
      border-color: var(--accent);
      box-shadow: 0 0 20px var(--glow);
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .user-info i {
      font-size: 22px;
      color: var(--accent);
    }

    #arrowIcon {
      transition: transform 0.3s;
      color: var(--accent);
    }

    .dropdown-list {
      position: absolute;
      top: 65px;
      right: 0;
      width: 200px;
      background: var(--panel);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      border-radius: 15px;
      list-style: none;
      padding: 8px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
      opacity: 0;
      visibility: hidden;
      transform: translateY(-20px) scale(0.9);
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .dropdown-list.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0) scale(1);
    }

    .list-item {
      padding: 12px 15px;
      display: flex;
      align-items: center;
      gap: 12px;
      color: var(--text-muted);
      cursor: pointer;
      border-radius: 8px;
      transition: var(--transition);
      font-size: 13px;
    }

    .list-item:hover {
      background: rgba(212, 163, 115, 0.1);
      color: var(--accent);
      padding-left: 20px;
    }

    .list-item i {
      font-size: 18px;
      transition: var(--transition);
    }

    .list-item:hover i {
      transform: scale(1.1);
      color: var(--accent);
    }

    .logout-item {
      border-top: 1px solid var(--border);
      margin-top: 5px;
      padding-top: 12px;
      color: #ff4757;
    }

    .logout-item:hover {
      background: rgba(255, 71, 87, 0.1);
      color: #ff4757;
    }

    /* ==================== */
    /* DASHBOARDS */
    /* ==================== */
    .dashboard-page { display: none; }
    .dashboard-page.active { display: block; }

    .home-welcome {
      text-align: center;
      margin-bottom: 30px;
    }

    .home-welcome h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 22px;
      color: var(--accent);
      margin-bottom: 10px;
    }

    .feature-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .feature-item {
      display: flex;
      align-items: center;
      gap: 20px;
      padding: 20px;
      background: linear-gradient(135deg, rgba(212, 163, 115, 0.1), transparent);
      border: 1px solid var(--border);
      border-radius: 15px;
      cursor: pointer;
      transition: var(--transition);
    }

    .feature-item:hover {
      transform: translateX(10px);
      border-color: var(--accent);
      box-shadow: 0 5px 20px var(--glow);
    }

    .feature-icon {
      width: 50px;
      height: 50px;
      border-radius: 12px;
      background: linear-gradient(135deg, #bf953f, #b38728);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: #fff;
      flex-shrink: 0;
    }

    .feature-text h3 {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .feature-text p {
      font-size: 12px;
      color: var(--text-muted);
    }

    .feature-badge {
      margin-left: auto;
      padding: 5px 12px;
      background: rgba(212, 163, 115, 0.2);
      border: 1px solid var(--accent);
      border-radius: 20px;
      font-size: 11px;
      color: var(--accent);
      font-weight: 600;
    }

    .feature-badge.free {
      background: rgba(34, 197, 94, 0.2);
      border-color: #22c55e;
      color: #22c55e;
    }

    .feature-badge.premium {
      background: rgba(212, 163, 115, 0.2);
      border-color: var(--accent);
      color: var(--accent);
    }

    .source-section {
      margin-top: 30px;
      padding: 25px;
      background: linear-gradient(135deg, rgba(212, 163, 115, 0.15), rgba(179, 135, 40, 0.05));
      border: 2px dashed var(--accent);
      border-radius: 20px;
      text-align: center;
    }

    .source-section h3 {
      font-family: 'Orbitron', sans-serif;
      color: var(--accent);
      margin-bottom: 15px;
      font-size: 18px;
    }

    .source-price {
      font-size: 36px;
      font-weight: 800;
      color: #22c55e;
      margin-bottom: 20px;
      text-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
    }

    .source-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 15px 30px;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #fff;
      text-decoration: none;
      border-radius: 15px;
      font-weight: 700;
      font-size: 14px;
      transition: var(--transition);
      box-shadow: 0 5px 20px rgba(34, 197, 94, 0.4);
    }

    .source-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(34, 197, 94, 0.6);
    }

    /* Payment Modal */
    .payment-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(18, 20, 23, 0.95);
      z-index: 9999;
      display: none;
      justify-content: center;
      align-items: center;
      padding: 20px;
      backdrop-filter: blur(10px);
    }

    .payment-modal.active { display: flex; }

    .payment-box {
      background: var(--panel);
      backdrop-filter: blur(20px);
      border: 2px solid var(--accent);
      border-radius: 30px;
      padding: 35px;
      width: 100%;
      max-width: 380px;
      text-align: center;
      box-shadow: 0 0 50px var(--glow);
    }

    .payment-icon {
      font-size: 60px;
      color: var(--accent);
      margin-bottom: 20px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }

    .payment-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 22px;
      color: var(--accent);
      margin-bottom: 10px;
    }

    .payment-price {
      font-size: 42px;
      font-weight: 800;
      color: var(--accent);
      margin-bottom: 25px;
      text-shadow: 0 0 20px var(--glow);
    }

    .pay-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #bf953f, #b38728);
      color: #121417;
      text-decoration: none;
      border-radius: 15px;
      font-weight: 700;
      font-size: 15px;
      margin-bottom: 20px;
      transition: var(--transition);
      box-shadow: 0 5px 20px var(--glow);
    }

    .pay-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px var(--accent);
    }

    .tx-input {
      text-align: center;
      font-family: 'Orbitron', monospace;
      letter-spacing: 1px;
      margin-bottom: 12px;
      background: rgba(255, 255, 255, 0.07);
    }

    .verify-btn {
      width: 100%;
      padding: 14px;
      background: rgba(255, 255, 255, 0.07);
      border: 2px solid var(--border);
      color: var(--text-muted);
      border-radius: 15px;
      font-weight: 700;
      cursor: not-allowed;
      transition: var(--transition);
    }

    .verify-btn.active {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      border-color: #22c55e;
      color: #fff;
      cursor: pointer;
    }

    .verify-btn.active:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(34, 197, 94, 0.4);
    }

    .payment-status {
      margin-top: 15px;
      padding: 10px;
      border-radius: 10px;
      display: none;
    }

    .payment-status.show {
      display: block;
    }

    .payment-status.success {
      background: rgba(34, 197, 94, 0.1);
      color: #22c55e;
      border: 1px solid #22c55e;
    }

    .payment-status.error {
      background: rgba(255, 71, 87, 0.1);
      color: #ff4757;
      border: 1px solid #ff4757;
    }

    /* Chat */
    .chat-container {
      background: rgba(255, 255, 255, 0.07);
      border-radius: 15px;
      padding: 20px;
      height: 350px;
      overflow-y: auto;
      margin-bottom: 15px;
      border: 1px solid var(--border);
    }

    [data-theme="light"] .chat-container {
      background: #f5f5f5;
    }

    .chat-message {
      margin-bottom: 15px;
      padding: 12px 15px;
      border-radius: 15px;
      max-width: 85%;
      animation: fadeIn 0.3s ease;
      word-wrap: break-word;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .chat-message.user {
      background: linear-gradient(135deg, #bf953f, #b38728);
      margin-left: auto;
      color: #121417;
    }

    .chat-message.ai {
      background: var(--panel);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      margin-right: auto;
    }

    .chat-sender {
      font-size: 11px;
      font-weight: 700;
      margin-bottom: 5px;
      opacity: 0.8;
    }

    .chat-input-area {
      display: flex;
      gap: 10px;
    }

    .chat-input-area input {
      flex: 1;
      margin-bottom: 0;
    }

    .chat-send {
      width: 50px;
      background: linear-gradient(135deg, #bf953f, #b38728);
      border: none;
      border-radius: 15px;
      color: #121417;
      cursor: pointer;
      font-size: 18px;
      transition: var(--transition);
    }

    .chat-send:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 20px var(--glow);
    }

    .chat-send:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* Loading indicator for AI */
    .typing-indicator {
      display: flex;
      gap: 5px;
      padding: 10px;
      background: var(--panel);
      border-radius: 15px;
      width: fit-content;
      margin-bottom: 15px;
    }

    .typing-indicator span {
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
      animation: typing 1s infinite ease-in-out;
    }

    .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
    .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typing {
      0%, 100% { transform: translateY(0); opacity: 0.5; }
      50% { transform: translateY(-5px); opacity: 1; }
    }

    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      background: var(--panel);
      backdrop-filter: blur(20px);
      border: 2px solid #22c55e;
      color: #22c55e;
      padding: 25px 40px;
      border-radius: 30px;
      font-weight: 700;
      font-size: 16px;
      display: none;
      z-index: 10000;
      box-shadow: 0 0 40px rgba(34, 197, 94, 0.4);
      animation: popIn 0.3s ease;
    }

    @keyframes popIn {
      to { transform: translate(-50%, -50%) scale(1); }
    }

    .popup.show { display: block; }

    .loading {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid #fff;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s linear infinite;
      margin-right: 8px;
      vertical-align: middle;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .bug-result {
      margin-top: 20px;
      padding: 15px;
      border-radius: 15px;
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid var(--border);
      display: none;
    }

    .bug-result.show {
      display: block;
    }

    .bug-result pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-family: 'Montserrat', sans-serif;
      font-size: 13px;
    }
  </style>
  <!-- Import du fichier bug.js -->
  <script src="bug.js"></script>
</head>
<body>
  <!-- DROPDOWN PROFIL -->
  <div class="profile-container">
    <button class="profile-dropdown-btn" id="profileBtn">
      <div class="user-info">
        <i class="fas fa-user-circle"></i>
        <span>Mon Profil</span>
      </div>
      <i class="fas fa-chevron-down" id="arrowIcon"></i>
    </button>
    <ul class="dropdown-list" id="dropdownMenu">
      <li class="list-item" onclick="showDashboard('home')">
        <i class="fas fa-home"></i>
        <span class="item-name">Accueil</span>
      </li>
      <li class="list-item" onclick="toggleTheme()">
        <i class="fas fa-moon" id="themeMenuIcon"></i>
        <span class="item-name" id="themeMenuText">Mode Clair</span>
      </li>
      <li class="list-item" onclick="showDashboard('premium')">
        <i class="fas fa-crown"></i>
        <span class="item-name">Premium</span>
      </li>
      <li class="list-item" onclick="showDashboard('source')">
        <i class="fas fa-code"></i>
        <span class="item-name">Code Source</span>
      </li>
      <li class="list-item logout-item" onclick="logout()">
        <i class="fas fa-sign-out-alt"></i>
        <span class="item-name">D√©connexion</span>
      </li>
    </ul>
  </div>

  <!-- PAYMENT MODAL -->
  <div id="paymentModal" class="payment-modal">
    <div class="payment-box">
      <div class="payment-icon">
        <i class="fas fa-lock"></i>
      </div>
      <h2 class="payment-title">Finaliser l'achat</h2>
      <p class="payment-desc" id="paymentDesc">
        Paiement s√©curis√© via MoneyFusion
      </p>
      <div class="payment-price" id="paymentAmount">5,00 ‚Ç¨</div>
      
      <a href="#" id="paymentLink" class="pay-btn" target="_blank">
        <i class="fas fa-credit-card"></i> Payer avec MoneyFusion
      </a>
      
      <div class="verify-box">
        <p>Apr√®s paiement, entrez votre ID de transaction</p>
        <input type="text" id="txidInput" class="tx-input" placeholder="TXN_XXXXXXXXXXXX">
        <button id="verifyBtn" class="verify-btn" onclick="verifyPayment()">
          V√©rifier le Paiement
        </button>
        <div id="paymentStatus" class="payment-status"></div>
      </div>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="app-wrapper">
    <!-- Image en haut au centre -->
    <div class="header-image">
      <img src="https://files.catbox.moe/k6qje7.jpg" alt="Profile">
    </div>
    
    <h1 class="main-title">ùëáùêªùê∏ ùêπùëÇùëÇùêø ùêæùêøùê∏ùêºùëÅ ùëã-ùêµùëàùê∫</h1>

    <!-- HOME -->
    <div id="homeDashboard" class="dashboard-page active">
      <div class="container">
        <div class="home-welcome">
          <h2>Bienvenue</h2>
          <p>S√©lectionnez une fonctionnalit√© pour commencer</p>
        </div>
        
        <div class="feature-list">
          <div class="feature-item" onclick="showDashboard('attack')">
            <div class="feature-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <div class="feature-text">
              <h3>Envoi de Bug</h3>
              <p>Envoyez des bugs WhatsApp cibl√©s</p>
            </div>
            <span class="feature-badge premium">PREMIUM</span>
          </div>
          
          <div class="feature-item" onclick="showDashboard('premium')">
            <div class="feature-icon">
              <i class="fas fa-crown"></i>
            </div>
            <div class="feature-text">
              <h3>Devenir Premium</h3>
              <p>Acc√©dez √† toutes les fonctionnalit√©s</p>
            </div>
            <span class="feature-badge">√Ä PARTIR DE 5‚Ç¨</span>
          </div>
          
          <div class="feature-item" onclick="showDashboard('chat-ai')">
            <div class="feature-icon">
              <i class="fas fa-robot"></i>
            </div>
            <div class="feature-text">
              <h3>Chat IA</h3>
              <p>Assistant intelligent</p>
            </div>
            <span class="feature-badge free">GRATUIT</span>
          </div>
        </div>

        <!-- Affichage du statut premium -->
        <div id="homePremiumStatus" class="current-plan" style="margin-top: 20px;"></div>

        <div class="source-section">
          <h3><i class="fas fa-crown"></i> Devenir D√©veloppeur</h3>
          <p>Achetez le code source complet et cr√©ez votre propre version</p>
          <div class="source-price">20000 XAF</div>
          <a href="https://chariow.com/achat-code-source" target="_blank" class="source-btn">
            <i class="fas fa-shopping-cart"></i> Acheter sur Chariow
          </a>
        </div>
      </div>
    </div>

    <!-- PREMIUM DASHBOARD (Nouvelle section) -->
    <div id="premiumDashboard" class="dashboard-page">
      <div class="container">
        <div class="section-title">Abonnement Premium</div>
        
        <!-- Badge Premium si d√©j√† abonn√© -->
        <div id="premiumBadge" class="premium-badge" style="display: none;">
          <i class="fas fa-check-circle"></i> COMPTE PREMIUM ACTIF
        </div>
        
        <!-- Plan actuel -->
        <div id="currentPlanDisplay" class="current-plan"></div>
        
        <!-- Options d'abonnement -->
        <div class="pricing-grid">
          <!-- Plan 1 semaine -->
          <div class="pricing-card" data-plan="week" data-price="5" data-currency="‚Ç¨" onclick="selectPlan('week')">
            <div class="pricing-name">1 SEMAINE</div>
            <div class="pricing-price">5<span style="font-size: 14px;">‚Ç¨</span></div>
            <ul class="pricing-features">
              <li><i class="fas fa-check"></i> Envoi de bugs illimit√©</li>
              <li><i class="fas fa-check"></i> Tous les types de bugs</li>
              <li><i class="fas fa-check"></i> Support prioritaire</li>
              <li><i class="fas fa-check"></i> 7 jours d'acc√®s</li>
            </ul>
          </div>
          
          <!-- Plan 1 mois (populaire) -->
          <div class="pricing-card" data-plan="month" data-price="15" data-currency="‚Ç¨" onclick="selectPlan('month')">
            <span class="popular-badge">POPULAIRE</span>
            <div class="pricing-name">1 MOIS</div>
            <div class="pricing-price">15<span style="font-size: 14px;">‚Ç¨</span></div>
            <ul class="pricing-features">
              <li><i class="fas fa-check"></i> Envoi de bugs illimit√©</li>
              <li><i class="fas fa-check"></i> Tous les types de bugs</li>
              <li><i class="fas fa-check"></i> Support prioritaire VIP</li>
              <li><i class="fas fa-check"></i> 30 jours d'acc√®s</li>
              <li><i class="fas fa-check"></i> -25% de r√©duction</li>
            </ul>
          </div>
        </div>
        
        <!-- Plan en XAF (optionnel) -->
        <div style="margin-top: 20px; text-align: center;">
          <div style="display: inline-block; padding: 10px 20px; background: var(--panel); border-radius: 15px; margin-bottom: 20px;">
            <span style="color: var(--text-muted);">Paiement en XAF aussi disponible :</span>
          </div>
          <div style="display: flex; gap: 10px; justify-content: center;">
            <button class="pricing-card" style="flex: 1; padding: 15px;" onclick="selectPlan('week-xaf')">
              <div>1 SEMAINE</div>
              <div style="font-size: 24px; font-weight: 700; color: var(--accent);">3000 XAF</div>
            </button>
            <button class="pricing-card" style="flex: 1; padding: 15px;" onclick="selectPlan('month-xaf')">
              <div>1 MOIS</div>
              <div style="font-size: 24px; font-weight: 700; color: var(--accent);">9000 XAF</div>
            </button>
          </div>
        </div>
        
        <!-- Bouton d'achat -->
        <button class="execute-button" id="premiumBuyBtn" onclick="initiatePremiumPurchase()" style="margin-top: 20px;">
          <i class="fas fa-shopping-cart"></i> Acheter maintenant
        </button>
        
        <p style="color: var(--text-muted); font-size: 12px; text-align: center; margin-top: 15px;">
          <i class="fas fa-lock"></i> Paiement 100% s√©curis√© via MoneyFusion
        </p>
      </div>
    </div>

    <!-- ATTACK (Payant) -->
    <div id="attackDashboard" class="dashboard-page">
      <div class="container">
        <div class="section-title">Configuration du Bug</div>
        
        <!-- V√©rification premium -->
        <div id="premiumRequired" class="current-plan" style="background: rgba(212, 163, 115, 0.1); border-color: var(--accent); color: var(--accent); margin-bottom: 20px; display: none;">
          <i class="fas fa-crown"></i> Fonctionnalit√© premium - Abonnez-vous pour y acc√©der
        </div>
        
        <input type="text" id="targetNumber" placeholder="Num√©ro WhatsApp (ex: 33612345678)">
        
        <!-- CUSTOM DROPDOWN -->
        <div class="custom-dropdown" id="bugTypeDropdown">
          <div class="dropdown-selected" id="dropdownSelected">
            <span id="selectedText">Choisir le type de bug</span>
            <i class="fas fa-chevron-down dropdown-arrow" id="dropdownArrow"></i>
          </div>
          <div class="dropdown-options" id="dropdownOptions">
            <div class="dropdown-option" data-value="delay-android">
              <i class="fab fa-android"></i> Delay Android
            </div>
            <div class="dropdown-option" data-value="delay-ios">
              <i class="fab fa-apple"></i> Delay iPhone
            </div>
            <div class="dropdown-option" data-value="bulldozer">
              <i class="fas fa-tractor"></i> Bulldozer Crash
            </div>
            <div class="dropdown-option" data-value="invisible">
              <i class="fas fa-eye-slash"></i> Message Invisible
            </div>
          </div>
        </div>
        
        <textarea id="bugMessage" placeholder="Message personnalis√© (optionnel)"></textarea>
        
        <button class="execute-button" onclick="initiateBugSend()" id="sendBugBtn">
          <i class="fas fa-paper-plane"></i> Envoyer le Bug
        </button>
        
        <div id="bugResult" class="bug-result"></div>
      </div>
    </div>

    <!-- CHAT IA (Gratuit) -->
    <div id="chatAiDashboard" class="dashboard-page">
      <div class="container">
        <div class="section-title">Assistant IA</div>
        <div class="chat-container" id="chatContainer">
          <div class="chat-message ai">
            <div class="chat-sender">ùëáùêªùê∏ ùêπùëÇùëÇùêø ùêæùêøùê∏ùêºùëÅ ùëã-ùêµùëàùê∫ AI</div>
            <div>Salut ! Je suis ton assistant intelligent. Pose-moi des questions sur les bugs, WhatsApp, ou tout autre sujet !</div>
          </div>
        </div>
        <div class="chat-input-area">
          <input type="text" id="chatInput" placeholder="√âcris ton message..." onkeypress="handleChatKeyPress(event)">
          <button class="chat-send" onclick="sendChatMessage()" id="chatSendBtn">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- SOURCE CODE -->
    <div id="sourceDashboard" class="dashboard-page">
      <div class="container" style="text-align: center;">
        <div class="section-title">Code Source</div>
        <i class="fas fa-code" style="font-size: 80px; color: var(--accent); margin: 30px 0;"></i>
        <p style="color: var(--text-muted); margin-bottom: 25px; line-height: 1.8;">
          Obtenez le code source complet de ùëáùêªùê∏ ùêπùëÇùëÇùêø ùêæùêøùê∏ùêºùëÅ ùëã-ùêµùëàùê∫.<br>
          HTML, CSS, JavaScript, Node.js backend inclus.<br>
          Documentation compl√®te fournie.
        </p>
        <div style="font-size: 48px; font-weight: 800; color: #22c55e; margin-bottom: 30px;">20000 XAF</div>
        <a href="https://chariow.com/achat-code-source" target="_blank" class="source-btn" style="font-size: 16px; padding: 18px 40px;">
          <i class="fas fa-shopping-bag"></i> Acheter sur Chariow.com
        </a>
      </div>
    </div>
  </div>

  <!-- NAVIGATION AVEC MARQUEUR -->
  <nav id="nav">
    <div class="marker" id="marker"></div>
    <a href="#" onclick="navigateTo('home')" onmouseenter="moveMarker(this)" class="active">Home</a>
    <a href="#" onclick="navigateTo('premium')" onmouseenter="moveMarker(this)">Premium</a>
    <a href="#" onclick="navigateTo('attack')" onmouseenter="moveMarker(this)">Bug</a>
    <a href="#" onclick="navigateTo('chat-ai')" onmouseenter="moveMarker(this)">IA</a>
    <a href="#" onclick="navigateTo('source')" onmouseenter="moveMarker(this)">Code</a>
  </nav>

  <!-- POPUP -->
  <div id="popup" class="popup">
    <i class="fas fa-check-circle"></i> Bug envoy√© avec succ√®s !
  </div>

  <script>
    // ==================== VARIABLES GLOBALES ====================
    const PAYMENT_KEY = 'thefool_bug_premium';
    const PREMIUM_EXPIRY_KEY = 'thefool_premium_expiry';
    let selectedPlan = null;
    let pendingBugData = null;

    // ==================== CUSTOM DROPDOWN ====================
    const dropdownSelected = document.getElementById('dropdownSelected');
    const dropdownOptions = document.getElementById('dropdownOptions');
    const dropdownArrow = document.getElementById('dropdownArrow');
    const selectedText = document.getElementById('selectedText');
    let selectedValue = '';

    dropdownSelected.addEventListener('click', (e) => {
      e.stopPropagation();
      dropdownOptions.classList.toggle('open');
      dropdownArrow.classList.toggle('open');
    });

    document.querySelectorAll('.dropdown-option').forEach(option => {
      option.addEventListener('click', () => {
        selectedText.textContent = option.textContent.trim();
        selectedValue = option.dataset.value;
        
        document.querySelectorAll('.dropdown-option').forEach(opt => {
          opt.classList.remove('selected');
        });
        
        option.classList.add('selected');
        
        dropdownOptions.classList.remove('open');
        dropdownArrow.classList.remove('open');
      });
    });

    window.addEventListener('click', () => {
      dropdownOptions.classList.remove('open');
      dropdownArrow.classList.remove('open');
    });

    // ==================== GESTION PREMIUM ====================
    
    // V√©rifier si l'utilisateur est premium
    function isPremium() {
      const isPaid = localStorage.getItem(PAYMENT_KEY) === 'true';
      const expiry = localStorage.getItem(PREMIUM_EXPIRY_KEY);
      
      if (!isPaid || !expiry) return false;
      
      // V√©rifier si le premium n'est pas expir√©
      const now = new Date();
      const expiryDate = new Date(expiry);
      
      return now < expiryDate;
    }

    // Obtenir la date d'expiration format√©e
    function getPremiumExpiryDate() {
      const expiry = localStorage.getItem(PREMIUM_EXPIRY_KEY);
      if (!expiry) return null;
      
      const date = new Date(expiry);
      return date.toLocaleDateString('fr-FR', {
        day: 'numeric',
        month: 'long',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    }

    // Activer le premium
    function activatePremium(plan, durationDays) {
      const now = new Date();
      const expiryDate = new Date(now);
      expiryDate.setDate(expiryDate.getDate() + durationDays);
      
      localStorage.setItem(PAYMENT_KEY, 'true');
      localStorage.setItem(PREMIUM_EXPIRY_KEY, expiryDate.toISOString());
      
      // Mettre √† jour l'affichage
      updatePremiumUI();
      
      showToast(`Premium activ√© ! Expire le ${expiryDate.toLocaleDateString('fr-FR')}`, 'success');
    }

    // Mettre √† jour l'interface selon le statut premium
    function updatePremiumUI() {
      const premium = isPremium();
      const expiryDate = getPremiumExpiryDate();
      
      // Badge premium
      const premiumBadge = document.getElementById('premiumBadge');
      if (premiumBadge) {
        premiumBadge.style.display = premium ? 'inline-block' : 'none';
      }
      
      // Affichage du plan actuel
      const currentPlanDisplay = document.getElementById('currentPlanDisplay');
      if (currentPlanDisplay) {
        if (premium && expiryDate) {
          currentPlanDisplay.className = 'current-plan show';
          currentPlanDisplay.innerHTML = `
            <i class="fas fa-check-circle"></i> Premium actif jusqu'au ${expiryDate}
            <div class="plan-expiry">Profitez de tous les bugs illimit√©s</div>
          `;
        } else {
          currentPlanDisplay.className = 'current-plan';
          currentPlanDisplay.innerHTML = '';
        }
      }
      
      // Affichage sur la page d'accueil
      const homeStatus = document.getElementById('homePremiumStatus');
      if (homeStatus) {
        if (premium && expiryDate) {
          homeStatus.className = 'current-plan show';
          homeStatus.innerHTML = `
            <i class="fas fa-crown"></i> Compte Premium actif - Expire le ${expiryDate}
          `;
        } else {
          homeStatus.className = 'current-plan';
          homeStatus.innerHTML = '';
        }
      }
      
      // Message premium requis sur la page attack
      const premiumRequired = document.getElementById('premiumRequired');
      if (premiumRequired) {
        premiumRequired.style.display = premium ? 'none' : 'block';
        if (!premium) {
          premiumRequired.innerHTML = `
            <i class="fas fa-crown"></i> Fonctionnalit√© premium - 
            <a href="#" onclick="navigateTo('premium'); return false;" style="color: var(--accent); text-decoration: underline;">
              Abonnez-vous maintenant
            </a>
          `;
        }
      }
    }

    // S√©lectionner un plan
    function selectPlan(plan) {
      // Retirer la s√©lection de toutes les cartes
      document.querySelectorAll('.pricing-card').forEach(card => {
        card.classList.remove('selected');
      });
      
      // Ajouter la s√©lection √† la carte cliqu√©e
      const selectedCard = Array.from(document.querySelectorAll('.pricing-card')).find(
        card => card.dataset.plan === plan
      );
      if (selectedCard) {
        selectedCard.classList.add('selected');
      }
      
      selectedPlan = plan;
      
      // Mettre √† jour le bouton
      const buyBtn = document.getElementById('premiumBuyBtn');
      if (buyBtn) {
        buyBtn.style.opacity = '1';
        buyBtn.style.pointerEvents = 'auto';
      }
    }

    // Initier l'achat premium
    function initiatePremiumPurchase() {
      if (!selectedPlan) {
        showToast('Veuillez s√©lectionner un forfait', 'error');
        return;
      }
      
      let amount, currency, planName, duration;
      
      switch(selectedPlan) {
        case 'week':
          amount = 5;
          currency = '‚Ç¨';
          planName = '1 semaine';
          duration = 7;
          break;
        case 'month':
          amount = 15;
          currency = '‚Ç¨';
          planName = '1 mois';
          duration = 30;
          break;
        case 'week-xaf':
          amount = 3000;
          currency = 'XAF';
          planName = '1 semaine';
          duration = 7;
          break;
        case 'month-xaf':
          amount = 9000;
          currency = 'XAF';
          planName = '1 mois';
          duration = 30;
          break;
        default:
          return;
      }
      
      // Simuler la cr√©ation de transaction (√† remplacer par appel API)
      const txid = 'TXN_' + Math.random().toString(36).substring(2, 15).toUpperCase();
      
      // Mettre √† jour le modal de paiement
      document.getElementById('paymentDesc').textContent = 
        `Forfait ${planName} - ${amount} ${currency}`;
      document.getElementById('paymentAmount').textContent = `${amount},00 ${currency}`;
      
      // Simuler un lien de paiement MoneyFusion
      document.getElementById('paymentLink').href = 
        `https://pay.moneyfusion.net/pay?amount=${amount}&currency=${currency}&plan=${selectedPlan}&txid=${txid}`;
      
      // Ouvrir le modal
      document.getElementById('paymentModal').classList.add('active');
    }

    // V√©rifier le paiement
    async function verifyPayment() {
      const txid = document.getElementById('txidInput').value.trim();
      const btn = document.getElementById('verifyBtn');
      const status = document.getElementById('paymentStatus');

      if (!txid || txid.length < 8) {
        status.textContent = 'ID transaction invalide';
        status.className = 'payment-status error show';
        return;
      }

      btn.innerHTML = '<span class="loading"></span> V√©rification...';
      btn.disabled = true;

      try {
        // Simulation de v√©rification
        setTimeout(() => {
          if (txid.startsWith('TXN_')) {
            // D√©terminer la dur√©e selon le plan s√©lectionn√©
            let duration = 7; // par d√©faut 1 semaine
            if (selectedPlan === 'month' || selectedPlan === 'month-xaf') {
              duration = 30;
            }
            
            activatePremium(selectedPlan, duration);
            
            status.textContent = '‚úÖ Paiement confirm√© ! Premium activ√©';
            status.className = 'payment-status success show';
            
            setTimeout(() => {
              document.getElementById('paymentModal').classList.remove('active');
              document.getElementById('txidInput').value = '';
              btn.innerHTML = 'V√©rifier le Paiement';
              btn.disabled = false;
              
              // Rediriger vers la page d'accueil
              navigateTo('home');
            }, 2000);
          } else {
            status.textContent = '‚ùå Transaction non trouv√©e';
            status.className = 'payment-status error show';
            btn.innerHTML = 'V√©rifier le Paiement';
            btn.disabled = false;
          }
        }, 2000);
      } catch (err) {
        status.textContent = '‚ùå Erreur de connexion';
        status.className = 'payment-status error show';
        btn.innerHTML = 'V√©rifier le Paiement';
        btn.disabled = false;
      }
    }

    // ==================== PAIEMENT BUGS ====================
    function initiateBugSend() {
      const target = document.getElementById('targetNumber').value.trim();
      const bugType = selectedValue;
      const message = document.getElementById('bugMessage').value.trim();

      if (!target) {
        showToast('Veuillez entrer un num√©ro cible', 'error');
        return;
      }
      if (!bugType) {
        showToast('Veuillez s√©lectionner un type de bug', 'error');
        return;
      }

      if (isPremium()) {
        executeBugSend(target, bugType, message);
      } else {
        pendingBugData = { target, bugType, message };
        showToast('Cette fonctionnalit√© n√©cessite un abonnement premium', 'error');
        setTimeout(() => navigateTo('premium'), 1500);
      }
    }

    function executeBugSend(target, bugType, message) {
      const btn = document.getElementById('sendBugBtn');
      const resultDiv = document.getElementById('bugResult');
      
      btn.disabled = true;
      btn.innerHTML = '<span class="loading"></span> Envoi en cours...';
      
      if (typeof window.sendBug === 'function') {
        window.sendBug(target, bugType, message, (result) => {
          btn.disabled = false;
          btn.innerHTML = '<i class="fas fa-paper-plane"></i> Envoyer le Bug';
          
          resultDiv.innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
          resultDiv.classList.add('show');
          
          const popup = document.getElementById('popup');
          popup.classList.add('show');
          setTimeout(() => popup.classList.remove('show'), 2500);
        });
      } else {
        setTimeout(() => {
          btn.disabled = false;
          btn.innerHTML = '<i class="fas fa-paper-plane"></i> Envoyer le Bug';
          
          const result = {
            success: true,
            target: target,
            type: bugType,
            message: message || 'Message par d√©faut',
            timestamp: new Date().toISOString(),
            status: 'Bug envoy√© avec succ√®s'
          };
          
          resultDiv.innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
          resultDiv.classList.add('show');
          
          const popup = document.getElementById('popup');
          popup.classList.add('show');
          setTimeout(() => popup.classList.remove('show'), 2500);
        }, 2000);
      }
    }

    // ==================== NAVIGATION ====================
    const marker = document.getElementById('marker');
    const nav = document.getElementById('nav');
    const navLinks = nav.querySelectorAll('a');

    function moveMarker(element) {
      marker.style.left = element.offsetLeft + 'px';
      marker.style.width = element.offsetWidth + 'px';
    }

    window.addEventListener('load', () => {
      const activeLink = nav.querySelector('a.active') || navLinks[0];
      moveMarker(activeLink);
      updatePremiumUI();
    });

    function navigateTo(page) {
      showDashboard(page);
      
      navLinks.forEach(link => link.classList.remove('active'));
      const activeLink = Array.from(navLinks).find(l => 
        (page === 'home' && l.textContent === 'Home') ||
        (page === 'premium' && l.textContent === 'Premium') ||
        (page === 'attack' && l.textContent === 'Bug') ||
        (page === 'chat-ai' && l.textContent === 'IA') ||
        (page === 'source' && l.textContent === 'Code')
      );
      if (activeLink) {
        activeLink.classList.add('active');
        moveMarker(activeLink);
      }
    }

    function showDashboard(page) {
      document.querySelectorAll('.dashboard-page').forEach(d => d.classList.remove('active'));
      document.getElementById(page + 'Dashboard').classList.add('active');
    }

    // ==================== DROPDOWN PROFIL ====================
    const profileBtn = document.getElementById('profileBtn');
    const dropdownMenu = document.getElementById('dropdownMenu');
    const arrowIcon = document.getElementById('arrowIcon');

    profileBtn.addEventListener('click', (e) => {
      dropdownMenu.classList.toggle('active');
      arrowIcon.style.transform = dropdownMenu.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0deg)';
      e.stopPropagation();
    });

    window.addEventListener('click', () => {
      dropdownMenu.classList.remove('active');
      arrowIcon.style.transform = 'rotate(0deg)';
    });

    // ==================== THEME ====================
    function toggleTheme() {
      const body = document.body;
      const isLight = body.getAttribute('data-theme') === 'light';
      const newTheme = isLight ? 'dark' : 'light';
      body.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);

      const icon = document.getElementById('themeMenuIcon');
      const text = document.getElementById('themeMenuText');
      if (newTheme === 'light') {
        icon.className = 'fas fa-sun';
        text.textContent = 'Mode Sombre';
      } else {
        icon.className = 'fas fa-moon';
        text.textContent = 'Mode Clair';
      }
    }

    const savedTheme = localStorage.getItem('theme') || 'dark';
    document.body.setAttribute('data-theme', savedTheme);
    if (savedTheme === 'light') {
      document.getElementById('themeMenuIcon').className = 'fas fa-sun';
      document.getElementById('themeMenuText').textContent = 'Mode Sombre';
    }

    // ==================== CHAT IA ====================
    const chatContainer = document.getElementById('chatContainer');
    const chatInput = document.getElementById('chatInput');
    const chatSendBtn = document.getElementById('chatSendBtn');
    
    const knowledgeBase = {
      'bonjour': 'Bonjour ! Comment puis-je vous aider aujourd\'hui ?',
      'salut': 'Salut ! Pr√™t √† explorer les fonctionnalit√©s ?',
      'bug': 'Les bugs WhatsApp sont des exploits techniques. Utilisez la section "Bug" pour les envoyer (n√©cessite un premium).',
      'whatsapp': 'WhatsApp est une application de messagerie. Nos bugs ciblent sp√©cifiquement cette plateforme.',
      'prix': 'Le premium est √† 5‚Ç¨ pour 1 semaine ou 15‚Ç¨ pour 1 mois. Le code source complet est √† 20000 XAF.',
      'premium': 'Le mode premium d√©bloque l\'envoi de bugs. Rendez-vous dans la section Premium pour vous abonner.',
      'comment': 'Pour utiliser l\'app : 1) Allez dans "Bug" 2) Entrez un num√©ro 3) Choisissez un type 4) Envoyez !',
      'aide': 'Bien s√ªr ! Que voulez-vous savoir ? (bugs, prix, fonctionnement, etc.)',
      'merci': 'Avec plaisir ! N\'h√©sitez pas si vous avez d\'autres questions.',
      'qui': 'Je suis l\'assistant IA de THE FOOL X-BUG, cr√©√© pour vous guider.',
      'createur': 'THE FOOL X-BUG a √©t√© cr√©√© par des d√©veloppeurs passionn√©s de s√©curit√© WhatsApp.',
      'default': 'D√©sol√©, je n\'ai pas compris. Essayez de reformuler ou tapez "aide".'
    };

    function addChatMessage(sender, text) {
      const div = document.createElement('div');
      div.className = `chat-message ${sender}`;
      div.innerHTML = `
        <div class="chat-sender">${sender === 'user' ? 'Vous' : 'ùëáùêªùê∏ ùêπùëÇùëÇùêø ùêæùêøùê∏ùêºùëÅ ùëã-ùêµùëàùê∫ AI'}</div>
        <div>${text}</div>
      `;
      chatContainer.appendChild(div);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function showTypingIndicator() {
      const indicator = document.createElement('div');
      indicator.className = 'typing-indicator';
      indicator.id = 'typingIndicator';
      indicator.innerHTML = '<span></span><span></span><span></span>';
      chatContainer.appendChild(indicator);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function removeTypingIndicator() {
      const indicator = document.getElementById('typingIndicator');
      if (indicator) indicator.remove();
    }

    function getAIResponse(userMessage) {
      const lowerMsg = userMessage.toLowerCase();
      
      for (const [key, response] of Object.entries(knowledgeBase)) {
        if (lowerMsg.includes(key)) {
          return response;
        }
      }
      
      return knowledgeBase['default'];
    }

    async function sendChatMessage() {
      const message = chatInput.value.trim();
      if (!message) return;

      chatInput.disabled = true;
      chatSendBtn.disabled = true;

      addChatMessage('user', message);
      chatInput.value = '';

      showTypingIndicator();

      setTimeout(() => {
        removeTypingIndicator();
        
        const response = getAIResponse(message);
        addChatMessage('ai', response);
        
        chatInput.disabled = false;
        chatSendBtn.disabled = false;
        chatInput.focus();
      }, 1500);
    }

    function handleChatKeyPress(e) {
      if (e.key === 'Enter') {
        sendChatMessage();
      }
    }

    // ==================== UTILS ====================
    function showToast(msg, type = 'success') {
      const popup = document.getElementById('popup');
      popup.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i> ${msg}`;
      popup.style.color = type === 'success' ? '#22c55e' : '#ff4757';
      popup.classList.add('show');
      setTimeout(() => popup.classList.remove('show'), 2500);
    }

    function logout() {
      localStorage.clear();
      location.reload();
    }

    // Event listeners
    document.getElementById('paymentModal').addEventListener('click', (e) => {
      if (e.target === e.currentTarget) {
        e.target.classList.remove('active');
        document.getElementById('txidInput').value = '';
        document.getElementById('paymentStatus').className = 'payment-status';
      }
    });

    document.getElementById('txidInput').addEventListener('input', (e) => {
      const btn = document.getElementById('verifyBtn');
      if (e.target.value.length >= 8) {
        btn.classList.add('active');
      } else {
        btn.classList.remove('active');
      }
    });

    // Initialisation
    window.addEventListener('load', () => {
      updatePremiumUI();
      
      if (typeof window.sendBug !== 'function') {
        console.log('bug.js non charg√©, utilisation du mode fallback');
      }
    });
  </script>
</body>
</html>